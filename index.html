<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>متجري الاحترافي</title>
<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:white;
}
header{
text-align:center;
padding:20px;
font-size:26px;
background:#000;
}
.products{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
gap:20px;
padding:20px;
}
.card{
background:#ffffff10;
backdrop-filter:blur(10px);
padding:10px;
border-radius:12px;
text-align:center;
}
.card img{
width:100%;
height:180px;
object-fit:cover;
border-radius:8px;
}
button{
background:#00c6ff;
border:none;
padding:8px;
margin-top:5px;
width:100%;
border-radius:6px;
cursor:pointer;
color:white;
font-weight:bold;
}
.admin{
display:none;
position:fixed;
top:0;
left:0;
width:320px;
height:100%;
background:#000;
padding:15px;
overflow:auto;
z-index:999;
}
input, select{
width:100%;
padding:6px;
margin:5px 0;
border-radius:5px;
border:none;
}
.closeBtn{
background:red;
margin-top:10px;
}
/* زر المالك ظاهر أعلى يسار */
#adminBtn{
position:fixed;
top:10px;
left:10px;
background:#ff9800;
padding:10px;
border-radius:5px;
font-weight:bold;
cursor:pointer;
z-index:1000;
}
</style>
</head>
<body>

<header id="storeName">متجري الاحترافي</header>

<!-- زر المالك -->
<div id="adminBtn" onclick="adminLogin()">لوحة المالك</div>

<div class="products" id="products"></div>

<div class="admin" id="adminPanel">
<h3>لوحة تحكم المالك</h3>

<!-- تغيير اسم المتجر -->
<input id="newStoreName" placeholder="اسم المتجر">
<button onclick="changeStoreName()">تغيير الاسم</button>

<!-- تغيير الخلفية -->
<input id="bgColor" placeholder="لون الخلفية مثال #111">
<button onclick="changeBG()">تغيير الخلفية</button>

<hr>

<!-- إضافة منتج -->
<h4>إضافة منتج</h4>
<input id="pName" placeholder="اسم المنتج">
<input id="pPrice" placeholder="السعر">
<input type="file" id="pImageFile" accept="image/*">
<button onclick="addProduct()">إضافة</button>

<hr>

<!-- حذف منتج -->
<h4>حذف منتج</h4>
<select id="deleteSelect"></select>
<button onclick="deleteProduct()">حذف</button>

<hr>
<button class="closeBtn" onclick="closeAdmin()">إغلاق</button>
</div>

<script>
let password = "112211";
let products = JSON.parse(localStorage.getItem("products")) || [];

// حفظ البيانات
function save(){
localStorage.setItem("products",JSON.stringify(products));
}

// عرض المنتجات
function render(){
let container=document.getElementById("products");
container.innerHTML="";
products.forEach((p,i)=>{
container.innerHTML+=`
<div class="card">
<img src="${p.image}">
<h3>${p.name}</h3>
<p>${p.price} ريال</p>
<button onclick="order(${i})">طلب عبر تيليقرام</button>
</div>
`;
});
updateDeleteSelect();
}

// إضافة منتج
function addProduct(){
let name=document.getElementById("pName").value;
let price=document.getElementById("pPrice").value;
let file=document.getElementById("pImageFile").files[0];

if(!name || !price || !file){
alert("الرجاء تعبئة كل الحقول واختيار صورة!");
return;
}

let reader = new FileReader();
reader.onload = function(e){
products.push({name:name, price:price, image:e.target.result});
save();
render();
document.getElementById("pName").value="";
document.getElementById("pPrice").value="";
document.getElementById("pImageFile").value="";
}
reader.readAsDataURL(file);
}

// إرسال طلب
function order(index){
let p = products[index];
let msg=`طلب جديد:%0A${p.name} - ${p.price} ريال`;
window.location.href="https://t.me/aa5c_q?text="+msg;
}

// تغيير اسم المتجر
function changeStoreName(){
let newName=document.getElementById("newStoreName").value;
if(newName){
document.getElementById("storeName").innerText=newName;
}
}

// تغيير الخلفية
function changeBG(){
let color=document.getElementById("bgColor").value;
if(color){
document.body.style.background=color;
}
}

// إغلاق لوحة التحكم
function closeAdmin(){
document.getElementById("adminPanel").style.display="none";
}

// فتح لوحة التحكم بكلمة السر
function adminLogin(){
let pass = prompt("ادخل كلمة مرور المالك");
if(pass === password){
document.getElementById("adminPanel").style.display="block";
}else{
alert("كلمة مرور خاطئة");
}
}

// تحديث قائمة الحذف
function updateDeleteSelect(){
let select=document.getElementById("deleteSelect");
select.innerHTML="";
products.forEach((p,i)=>{
let option=document.createElement("option");
option.value=i;
option.text=p.name;
select.appendChild(option);
});
}

// حذف المنتج
function deleteProduct(){
let index = document.getElementById("deleteSelect").value;
if(index !== null){
products.splice(index,1);
save();
render();
}
}

render();
</script>

</body>
</html>
